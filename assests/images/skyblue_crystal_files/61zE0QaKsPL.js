(function(B){var F=window.AmazonUIPageJS||window.P,ta=F._namespace||F.attributeErrors,e=ta?ta("DetailPageImageBlockAssets",""):F;e.guardFatal?e.guardFatal(B)(e,window):e.execute(function(){B(e,window)})})(function(B,F,ta){B.register("postMetric",function(){return{postCountMetric:function(e){if("undefined"!==typeof e){var l=F.ue;if(l){var m=l.count(e)||0;l.count(e,m+1)}}},postTimeMetric:function(e,l){if("undefined"!==typeof e&&"undefined"!==typeof l){var m=F.ue;m&&m.count(e,l)}}}});"use strict";B.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});B.register("postEarlyMetric",function(){return null});"use strict";B.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(e,l,m,b){e=e.extend(!0,{},m,b);var k=new l(e);B.register("ImageBlockAPI",function(){return k.api});return k});"use strict";B.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(e,l,m){e=m.airyConfig;e.jsUrl&&B.load.js(e.jsUrl);e.cssUrl&&B.load.css(e.cssUrl)});"use strict";
B.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(e,l,m,b,k,H){var w={};return function(e){var d=this;d.dispatch=function(b,d){var e=w[b];k.isDefined(e)&&l.each(e,function(b,h){h.call(F,d)})};d.register=function(b,d){k.isDefined(w[b])||(w[b]=[]);"function"===typeof d&&w[b].push(d)};d.model=new m(e,d);d.view=new b(e,d,d.model);d.api=new H(e,d,d.model);d.init=function(){d.model.init();d.view.init()};d.init()}});"use strict";
B.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(e,l,m){function b(b,d,h,k,a){m.isDefined(b)&&(G.type=b);m.isDefined(d)&&(G.index=d);m.isDefined(h)&&(G.thumbnailIndex=h);m.isDefined(k)&&(G.variant=k);m.isDefined(a)&&(G.color=a)}function k(h){b("image",0,0,"MAIN",h||d.landingAsinColor||d.defaultColor)}function H(d){d=d.data;E=e.copy(G);b(d.type,d.index,d.thumbnailIndex,d.variant,d.color)}function w(b){H(b);b=e.copy(b);b.data=e.copy(G);h.dispatch("updateView",b)}function q(){E=
e.copy(G);k(G.color)}var d,h,G={},E={},K,C;return function(b,l){h=l;d=b;h.register("updateSelection",w);h.register("updateModel",H);h.register("resetModel",q);this.init=function(){k()};this.getCurrentItem=function(){return e.copy(G)};this.getPreviousItem=function(){return e.copy(E)};this.setCurrentEvent=function(b){K=b};this.getCurrentEvent=function(){return K};this.setImmersiveViewModalInstance=function(b){C=b};this.getImmersiveViewModalInstance=function(){return C};this.updateTitle=function(b){d.title=
b}}});"use strict";B.when("ImageBlockBTF","postMetric").execute(function(e,l){function m(b,e,l,m,d){function h(a){"click"===a.type&&m.postCountMetric("thumbClick");"click"===a.type&&A.overrideAltImageClickAction?t.dispatch("thumbActionClick",a):t.dispatch("updateSelection",a)}function G(a){A.useClickZoom||t.dispatch("imageClick",a)}function E(a){A.useClickZoom||t.dispatch("imageHover",a)}function K(a){t.dispatch("button360Click",a)}function C(f){!l.isDefined(f)||"swatchClick"!==f.type&&"updatedData"!==
f.type?(a.update(f),"swatchHover"!==f.type&&I.getPreviousItem().thumbnailIndex!==f.data.thumbnailIndex&&m.postCountMetric(f.data.type+"ThumbnailSelected"),b.trigger("image-block-thumbnail-selected",f.data)):a.render(f.data.color,!1,f.onload)}function x(a){t.dispatch("resize",a)}function J(a){l.selectThumbnail(a,r)}function N(a){var b=a.data,d;b&&"ingress"!==b.type&&"click"===a.type&&(d=a);return d}function O(a){var b=I.getCurrentItem(),d={type:"click"};d.$declarativeParent=a;d.data=b;return d}var a,
A,t,I,r;return function(f,l,m){a=this;A=f;t=l;I=m;r=e("#imageBlock #altImages ul");var q=e("#imageBlock .canvas"),c=e("#main-image-container"),g;a.subViews=[];for(l=0;l<d.length;l++)a.subViews.push(new d[l](f,m,a,t));a.render=function(b,f,d){var h=0;r.find(".item").remove();b=b||I.getCurrentItem().color;e.each(a.subViews,function(a,g){h=g.render(b,h,q,r,c,f,d)||h});var t=r.find(".a-button-selected").closest(".a-declarative");g=O(t)};a.init=function(){r=e("#imageBlock #altImages ul");var c=r.find(".a-button-selected").closest(".a-declarative"),
g=c.data("action"),c=c.data(g)||{};c.color=A.landingAsinColor||A.defaultColor;t.dispatch("updateModel",{data:c});a.render(c.color,!0);A.isDebug&&F.console&&console.log(A);t.register("updateView",C);t.register("selectThumbnail",J);"function"===typeof F.markFeatureInteractive&&F.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["click","hover"]},{name:"thumbnail",events:["click","hover"]}]});A.disableHoverOnAltImages||b.declarative("thumb-action",["mouseenter",
"mouseleave"],h);b.declarative("thumb-action",["click"],h);b.declarative("main-image-click",["click"],G);b.declarative("main-image-click",["mouseenter","mouseleave"],E);b.declarative("button-360-click",["click"],K);b.on("resize",x)};a.update=function(c){e.each(a.subViews,function(a,g){g.update(c)});A.usePeekHover&&("mouseleave"===c.type?t.dispatch("updateSelection",g):"click"===c.type&&(g=N(c)||g))}}}var b=["A","jQuery","imageBlockUtils","postMetric"].concat(e.views);B.when.apply(B,b).register("ImageBlockView",
function(){for(var b=arguments[0],e=arguments[1],l=arguments[2],q=arguments[3],d=[],h=4,G=arguments.length;h<G;h++)d.push(arguments[h]);return m(b,e,l,q,d)})});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(e,l,m,b,k,H,w){function q(a,c,g,b){if(!m.isjQueryObjDefined(a.find(".a-button-selected"))){var n=f.getCurrentItem();if(!b||"chromeless-video"!==n.type||!r.autoplayVideo){b=
0;"image"===n.type&&(b=Math.max(G(n.color,n.variant),0));var d=c+b;d>=g&&(b=0,d=c);c=m.getImageHash(n.color,b,r);-1!==c&&(y.dispatch("updateModel",{data:{index:b,thumbnailIndex:d,variant:c.variant,type:"image"}}),c=a.find(".item").get(d),m.selectGivenThumbnail(l(c),a))}}}function d(a,c,b){c=r.colorImages&&r.colorImages[c];var g=a;m.isDefined(c)&&(l.each(c,function(c,b){a<r.maxAlts&&(m.createThumbnail({type:"image",index:c,thumbnailIndex:a,variant:b.variant},b.thumb,M,"imageThumbnail"),a++)}),H.isEnabled&&
w.logAltImgRequestPlacedOnThumbnails(l,H,f),q(M,g,a,b));return a}function h(a,c){if("image"===a.type){var b=l("#image-canvas-caption #canvasCaption"),g,f=r.staticStrings,n=r.colorImages,d=a.color,h=a.index;c&&r.useIV?g=f.clickToExpand:n[d]&&n[d][h].hiRes&&r.useHoverZoom?(g=r.useHoverZoomIpad?f.touchToZoom:r.useClickZoom?f.clickToZoom:f.rollOverToZoom,r.hoverZoomIndicator&&(g="\x3cimg src\x3d'"+r.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+g)):r.useIV&&(g=f.clickToExpand);b.html(g)}}function G(a,
c){return m.getIndexForVariant(a,c,r)}function E(a,g){var b="a-dynamic-image";if(!r.acEnabled){var f;l.each(a.main,function(a,c){m.isDefined(f)||(f=parseFloat(c[1]/c[0])<=parseFloat(r.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});b+=f}var n=m.getMaxDimensionsOfMainImage(a.main,c,r),d=n[0],h=n[1],n=l("\x3cdiv\x3e\x3c/div\x3e"),d={"max-height":d,"max-width":h};n.addClass(b).css(d).attr({"data-old-hires":a.hiRes,"data-a-manual-replacement":"true",onload:g}).data("a-dynamic-image",a.main);
return n}function K(a){var c=u.find(".swatchHoverExp");a=E(a);c.find(".imgTagWrapper").html(a);e.loadImageManually(a);return c}function C(a){var b=c.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");r.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(r.imgTagWrapperClasses)}function x(a,c){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var b=m.getImageHash(a.color,a.index,r);if(-1===b)return b={data:{index:0,thumbnailIndex:0,variant:"",
type:"unavailable"}},m.lazyLoadingRequired(a,f,r)?O(a,!1,c):(y.dispatch("updateModel",b),m.showUnavailable(a.color)),-1;var g=u.find(".item.itemNo"+a.thumbnailIndex);if(!m.isjQueryObjDefined(g)){var g=a.thumbnailIndex,g=u.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+g+" maintain-height"),n=E(b,c);g.find(".placeHolder").replaceWith(n);u.find(".list").append(g);e.loadImageManually(n)}C(g);y.dispatch("loadMagnifier");h(a);r.useIV&&m.isDefined(b.hiRes)&&
g.css("cursor","pointer");a.isUserGenerated&&(g=f.getPreviousItem(),n=a.variant,m.isDefined(n)&&g.thumbnailIndex!==a.thumbnailIndex&&(H.isEnabled&&w.logAltImgRequestServed(H),k.postCountMetric("ImageThumbnailSelectedVariant:"+n),0===n.indexOf("IG")&&(k.postCountMetric("IGImageSelectedVariant:"+n),k.postCountMetric("IGImageSelectedEvent:"+a.interaction))));e.trigger("dp:image-block:update",b)}}function J(a){var c=Math.max(G(a.color,f.getCurrentItem().variant),0),c=m.getImageHash(a.color,c,r);if(-1===
c)return m.lazyLoadingRequired(a,f,r)?m.lazyLoadOnHoverEnabled(r)&&(N(".3",!0),m.spinner(u,!0),e.delay(function(){f.getCurrentEvent().data===a&&O(a,!0)},500)):m.showUnavailable(a.color),-1;var b=K(c);C(b);e.trigger("dp:image-block:update",c)}function N(a,c){c?u.css("opacity",a):l("#imageBlock").css("opacity",a)}function O(c,d,h){g=d;n=h;var e=c.color,p=r.colorToAsin[e];if(p&&p.asin){var t={};t.params={asin:p.asin,productGroupID:r.productGroupID,color:e};t.success=function(b){b?(m.ajaxState(p.asin,
"success"),r.colorImages[e]=b.colorImage,m.isDefined(r.spin360ColorEnabled)&&(r.spin360ColorEnabled[e]=b.enable360),e===c.color&&(d&&g?c===f.getCurrentEvent().data&&(a(c),J(c)):(b={type:"updatedData",data:f.getCurrentItem(),onload:h||n},y.dispatch("updateView",b))),B.register(m.rankedImagesReadyEvent(p.asin))):m.ajaxState(p.asin,"fail")};t.error=function(){m.ajaxState(p.asin,"fail")};t.indicator=m.spinner(u);m.ajaxState(p.asin,void 0)&&"fail"!==m.ajaxState(p.asin,void 0)||(N(".3",d),b.load("/gp/product/features/apparel-main-image/ranked-images.html",
t),m.ajaxState(p.asin,"sent"));return r.colorImages&&r.colorImages[e]}}function a(a,c){m.lazyLoadingRequired(a,f,r)||(l("#imageBlock").css("opacity","1"),u.css("opacity","1"),m.spinner(u,!1),u.find("li").removeClass("selected"),l("#image-canvas-caption #canvasCaption").empty(),m.hideUnavailable(),c&&u.find(".list .item").remove())}function A(){var a=u.find(".item .imgTagWrapper"),b=m.getContainerHeight(c,r.holderRatio,r.holderMaxHeight);0<b&&(c.height(b),a.height(b));u.find("img.a-dynamic-image").each(function(){var a=
l(this);a.data("a-manual-replacement")&&e.loadDynamicImage(this);var b=a.data("a-dynamic-image"),b=m.getMaxDimensionsOfMainImage(b,c,r);a.css({"max-height":b[0]+"px","max-width":b[1]+"px"})})}function t(a){h(f.getCurrentItem(),"mouseenter"===a.type)}var I,r,f,y,M,u,c,g,n,p;return function(b,g,n,h){I=this;r=b;f=g;y=h;r.colorImages[r.landingAsinColor]=r.colorImages[r.defaultColor];I.render=function(b,g,n,h,e,t,k){u=n;M=h;c=e;p=d(g,b,t);t||(b=f.getCurrentItem(),m.lazyLoadingRequired(b,f,r)&&y.dispatch("updateModel",
{data:{type:"lazy-loaded"}}));a(f.getCurrentItem(),!t);x(f.getCurrentItem(),k);return p};I.update=function(c){var b=c.data;f.setCurrentEvent(c);"ingress"!==b.type&&a(c.data,!1);"swatchHover"===c.type?b.color===f.getCurrentItem().color?x(f.getCurrentItem()):c.captured||-1===J(b)||(c.captured=!0):"image"===b.type&&(b.interaction=c.type,b.isUserGenerated=!0,"mouseenter"===c.type&&k.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+p),x(b),r.usePeekHover&&"click"!==c.type||(m.selectGivenThumbnail(c.$declarativeParent,
M),"click"===c.type&&k.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+p)))};y.register("imageHover",t);y.register("resize",A)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(e,l,m,b,k,H){function w(b){N?b.css("cursor","url('"+E.staticImages.zoomIn+"'), auto"):(b.css("cursor","-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in"))}function q(b){var a=
b.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);b={};if(m.isDefined(a))for(var a=a[1].split("_"),d=0;d<a.length;d++){var h=a[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);m.isDefined(h)&&(b[h[1]]=parseInt(h[2],10))}return b}function d(d,a){function h(){var c;a.useClickZoom?(c=a.offsetInClickZoom,c=[Math.min(1,Math.max(0,C[0]-(x[0]+c))/(x[2]-2*c)),Math.min(1,Math.max(0,C[1]-(x[1]+c))/(x[3]-2*c))]):c=p&&p.updatePosition();if(c&&n&&n.detailSize){var b=[n.detailSize[0]-n.rect.width,n.detailSize[1]-n.rect.height];
e.capabilities.rtl?n.detailImage.get(0).style.right=-(c[0]*b[0])+"px":n.detailImage.get(0).style.left=-(c[0]*b[0])+"px";n.detailImage.get(0).style.top=-(c[1]*b[1])+"px"}}function t(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function I(a){var c=U?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";C=U?[c.pageX,c.pageY]:[a.pageX,a.pageY];if(e.capabilities.rtl){var b=l(F).width();C=U?[b-c.pageX,c.pageY]:[b-a.pageX,a.pageY]}}function r(g){U&&g.preventDefault();I(g);
a.useClickZoom?g=[x[0],x[1],x[0]+x[2],x[1]+x[3]]:(g=p?p.offset:d.offsetParent().offset(),g=E.acEnabled?[g.left,g.top,c.width()+g.left,c.height()+g.top]:[z[0]+g.left,z[1]+g.top,z[0]+z[2]+g.left,z[1]+z[3]+g.top]);C[0]<g[0]||C[1]<g[1]||C[0]>=g[2]||C[1]>=g[3]||E.acEnabled&&!t(d)?(a.fadeMagnifier?B||(B=!0,ea=setTimeout(function(){f(!0)},500)):a.useClickZoom||f(),V&&(V=!1,clearTimeout(fa))):(V||(V=!0,fa=setTimeout(function(){b.postCountMetric("dppc_hoverZoomOpened");k.isEnabled&&H.logHoverZoomRequestServed(k)},
1E3)),a.fadeMagnifier&&B&&(B=!1,clearTimeout(ea)),h())}function f(a){a&&u.suppressMagnifier(!0);if(S&&(n&&n.hide(),p&&(p.destroy(),p=null),S=!1,U?(d.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),l(document).trigger("disengaged.magnifier")):l(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),G(),a))d.one("click.magnifier touchstart.magnifier",function(a){y(a,!0)})}function y(g,e){e&&u.suppressMagnifier(!1);if(!S&&!J&&(0===ha&&(b.postCountMetric("dppc_hoverTime",
new Date-(F.ue&&F.ue.t0||0)),ha=1),ja[K]||(b.postCountMetric("dppc_hoverMain"),ja[K]=1),z=[d.position().left,d.position().top,d.width(),d.height()],K&&(I(g),n?n.refit().show():n=new ga,a.useClickZoom||(p=p||new ia),x=n.getWindowSize(),h()),S=!0,U?(d.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",r).bind("touchend.magnifier",f),l(document).trigger("engaged.magnifier")):(E.acEnabled?c.unbind("mousemove.magnifier"):d.unbind("mousemove.magnifier"),l(document).trigger("engaged.magnifier").bind("mousemove.magnifier",
r)),e)){var t=l("#zoomWindow");if(0<t.length)t.one("click.magnifier touchend.magnifier",function(a){f(!0)})}}function G(){a.useHoverZoom&&(U?d.bind("touchstart.magnifier touchmove.magnifier",y):E.acEnabled?t(d)&&c.bind("mousemove.magnifier",y):d.bind("mousemove.magnifier",y))}var u=this,c=d.offsetParent(),g={detailImageUrl:d.attr("data-old-hires"),location:"over",locationElement:d,prelaod:"ready",zIndex:50,offsetInClickZoom:50};a=l.extend(g,a);a.adjustment=[10,0,-10,0];var n=null,p=null,C=null,z=
null,x=null,R={"null":1,"":1,undefined:1},S=!1,J=!1,K=a.detailImageUrl,U=a.useHoverZoomIpad||0,ha=0,ja={},ia=function(){function c(a){var b=Math.round(Math.min(d.width(),n.rect.width/a));a=Math.round(Math.min(d.height(),n.rect.height/a));e.css({width:b,height:a});g=[b,a]}var b=this,g=[0,0],f=(n.detailSize&&n.detailSize[0]||5E8)/z[2],h=(n.detailSize&&n.detailSize[1]||5E8)/z[3],f=h>f?h:f;l("#magnifierLens").remove();var e=l("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});a.generalImageUrls.zoomLensBackground&&
e.css({backgroundImage:"url("+a.generalImageUrls.zoomLensBackground+")"});E.showMagnifierOnHover?w(e):e.css("cursor","pointer");b.updatePosition=function(){var a=[z[2]-g[0],z[3]-g[1]],c=0>=a[0]?.5:Math.max(0,Math.min(1,(C[0]-g[0]/2-z[0]-b.offset.left)/a[0])),d=0>=a[1]?.5:Math.max(0,Math.min(1,(C[1]-g[1]/2-z[1]-b.offset.top)/a[1])),n=z[0]+Math.round(c*a[0]),a=z[1]+Math.round(d*a[1]);e.get(0).style.left=n+"px";e.get(0).style.top=a+"px";return[c,d]};b.destroy=function(){e.remove()};b.offset=d.offsetParent().offset();
c(f);b.updatePosition();e.appendTo(d.parent());n.detailImage[0].complete||n.detailImage.load(function(){var a=n.detailImage.width()/z[2];c(a);b.updatePosition()})};ia.preload=function(){u.preload(a.generalImageUrls.lensBackgroundUrl)};var ga=function(){function c(){var b={};if("over"===a.location){var b=a.useClickZoom,f={},h=l("#leftCol"),p=l("#centerCol"),t=l("#rightCol"),r=l("#hover-zoom-end"),k=l("#actionPanelContainer"),ha=m.isjQueryObjDefined(h)?h.outerHeight():p.outerHeight();f.top=m.isjQueryObjDefined(h)?
h.offset().top:p.offset().top;f.bottom=ha+f.top;f.right=m.isjQueryObjDefined(t)?t.offset().left:k.offset().left;f.left=b?0:h.offset().left+h.outerWidth();m.isjQueryObjDefined(r)&&r.offset().top>f.bottom&&(f.bottom=r.offset().top);b=f}else"right"===a.location&&(b=d.offset(),b={left:b.left+d.outerWidth(),top:b.top,right:b.left+d.outerWidth()+400,bottom:b.top+400});a.minHeightElement&&(b.bottom=Math.max(b.bottom,b.top+l(a.minHeightElement).outerHeight()));b.bottom=Math.min(b.bottom,l(F).scrollTop()+
l(F).height());b.left+=n[0];b.top+=n[1];b.right+=n[2];b.bottom+=n[3];b.width=b.right-b.left;b.height=b.bottom-b.top;a.enhancedHoverOverlay&&m.isDefined(F.pageXOffset)&&(f=l(F).width(),b.width=f-b.left+F.pageXOffset-18,b.height-=14);e.css({left:b.left,top:b.top,width:b.width,height:b.height});g.rect=b;return g}function b(c){var d=new Image;g.detailSize=[0,0];d.onload=function(){g.detailSize=[d.width,d.height];h()};d.src=c.attr("src");if(0<d.width&&0<d.height)g.detailSize=[d.width,d.height];else if(a.detailImageSize)g.detailSize=
a.detailImageSize;else{c=q(d.src);var f=z[2]/z[3];c.SS||c.AA?(c=c.SS||c.AA,g.detailSize=[c,c]):c.SX?g.detailSize=[c.SX,Math.round(c.SX/f)]:c.SY?g.detailSize=[Math.round(c.SY*f),c.SY]:c.SL&&(g.detailSize=1<=f?[c.SL,Math.round(c.SL/f)]:[Math.round(c.SL*f),c.SL])}}var g=this,n=a.adjustment;l("#zoomWindow").remove();var f={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:a.zIndex};a.enhancedHoverOverlay&&(f.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",f.border="1px solid #949494",f.borderColor=
"rgb(148,148,148)");var e=l("\x3cdiv id\x3d'zoomWindow' /\x3e").css(f);a.fadeMagnifier&&e.fadeIn(200);a.useClickZoom&&(N?e.css("cursor",'url("'+a.zoomOutIcon+'"), auto'):(e.css("cursor","-webkit-zoom-out"),e.css("cursor","-moz-zoom-out"),e.css("cursor","zoom-out")));g.updateImage=function(a){a=l("\x3cimg id\x3d'detailImg' src\x3d'"+a+"'/\x3e").css("position","absolute");g.detailImage&&g.detailImage.remove();e.append(a);l(document).trigger("updated.magnifier");g.detailImage=a;b(g.detailImage)};g.refit=
function(){c();b(g.detailImage);return g};a.fadeMagnifier?(g.show=function(){e.fadeIn(200);return g},g.hide=function(){e.fadeOut(200);return g}):(g.show=function(){e.show();return g},g.hide=function(){e.hide();return g});g.destroy=function(){e.remove();return g};g.getWindowSize=function(){return[g.rect.left,g.rect.top,g.rect.width,g.rect.height]};g.updateImage(K);c();e.appendTo(document.body)},B=!1,ea,V=!1,fa;u.preload=function(a){a=l.makeArray(a);for(var b=a.length,c=0;c<b;c++)a[c]instanceof Array?
u.preload(a[c]):"string"===typeof a[c]&&a[c]&&!R[a[c]]&&(R[a[c]]=new Image,R[a[c]].src=a[c])};u.changeImage=function(b,c){S&&f();K=c;d.attr("src",b);u.preload(b);z=[d.position().left,d.position().top,d.width(),d.height()];c&&("immediately"===a.preload?u.preload(c,!0):l(F).ready(function(){u.preload(c)}),n?n.updateImage(c):d.attr("data-old-hires",c))};u.destroy=function(){E.acEnabled?c.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):d.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");
l(document).unbind("mousemove.magnifier");p&&p.destroy();p=null;n&&n.destroy();n=null};u.detailImage=function(){return n.detailImage};u.suppressMagnifier=function(a){J=a};u.isEngaged=function(){return S};u.engageMagnifier=y;u.disengageMagnifier=f;d[0].complete?G():d.one("load",G);u.preload(d.attr("src"));if(a.preload){var D=a.detailImageUrl,g=function(){u.preload(D,!0);a.useClickZoom||ia.preload()},Q=a.preload;Q.constructor!==Array&&(Q=[Q]);for(var aa=0;aa<Q.length;aa++)if("immediately"===Q[aa])g();
else if(l(F)[Q[aa]])l(F)[Q[aa]](g);else l(F).bind(Q[aa],g)}return u}function h(){if(E.useHoverZoom){var b={adjustment:[0,0,1,1],generalImageUrls:E.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:E.useHoverZoomIpad,useHoverZoom:E.useHoverZoom,useClickZoom:E.useClickZoom,fadeMagnifier:E.fadeMagnifier,zoomOutIcon:E.staticImages.zoomOutCur,enhancedHoverOverlay:E.enhancedHoverOverlay||E.atfEnhancedHoverOverlay};x&&(x.destroy(),x=void 0);var a=J.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");
m.isjQueryObjDefined(a)?E.useClickZoom?(a.one("click.loadmagnifier touchstart.loadmagnifier",function(e){x=new d(a,b);x.engageMagnifier(e,!0)}),N?a.css("cursor",'url("'+E.staticImages.zoomInCur+'"), auto'):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))):x=new d(a,b):k.isEnabled&&H.logHoverZoomApplicability(l,k)}}var G,E,K,C,x,J,N=navigator.userAgent.match(/msie|trident/i);return function(b,a,d,e){G=this;E=b;K=a;k.refToModel=K;C=e;G.render=function(a,b,
d,e,h,t){J=d;x&&(x.destroy(),x=void 0)};G.update=function(a){};C.register("loadMagnifier",h);C.register("resize",h)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(e,l,m,b){function k(d,e,k){d=(d=k?k:m.getColorFromState(e.getState().hovered_variations,q))&&""!==d?d:q.defaultColor;h.dispatch("updateView",{type:"swatchHover",data:{color:d}});b.postCountMetric("swatchHover")}function H(e,k,l,w){e=(e=w?w:m.getColorFromState(k.getState().selected_variations,
q))&&""!==e?e:q.defaultColor;e===d.getCurrentItem().color?"function"===typeof l&&l():(h.dispatch("updateSelection",{type:"swatchClick",data:{color:e},onload:l}),b.postCountMetric("swatchClick"))}var w,q,d,h;return function(b,l,m,C){w=this;q=b;d=l;h=C;e.on("image-block-twister-swatch-hover",k);e.on("image-block-twister-swatch-click",H);w.render=function(b,d,e,h,a){};w.update=function(b){}}});"use strict";B.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",
function(e,l,m,b,k,H,w){function q(c,g,d,f){!a.autoplayVideo||z||a.useChromelessVideoPlayer?!b.isjQueryObjDefined(c.find(".a-button-selected"))&&(d=A.getCurrentItem(),!f||a.prioritizeVideos||"chromeless-video"===d.type&&a.autoplayVideo)&&(f=b.getVideoHash(d.color,0,a),-1!==f&&(g+=0,t.dispatch("updateModel",{data:{index:0,thumbnailIndex:g,variant:f.variant,type:a.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),g=c.find(".item").get(g),b.selectGivenThumbnail(l(g),c))):(b.selectGivenThumbnail(c.find("img:last"),
c),b.fadeToThumbnail(c.find("img").length-1,y,c))}function d(c){var g=A.getCurrentItem().color;if(a.useChildVideos&&!a.colorToVideo[g]){var d=function(){if(c){a.colorToVideo[g]=c;var b={type:"updatedData",data:A.getCurrentItem()};t.dispatch("updateView",b)}};a.lazyLoadExperienceDisabled?d():B.when(b.rankedImagesReadyEvent(a.colorToAsin[g].asin)).execute(function(){d()})}}function h(c){if(!a.useChildVideos)return b.lazyLoadingRequired(A.getCurrentItem(),A,a)?void 0:a.videos;if(a.colorToVideo[c])return a.colorToVideo[c];
var g=a.colorToAsin[c];if(g&&g.asin){var f={};f.params={asin:g.asin,productGroupID:a.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:a.useChromelessVideoPlayer,isUDP:a.isUDP};a.isDPXFeatureEnabled||(f.success=function(c){d(c)},k.load("/gp/product/features/apparel-main-image/videos.html",f));return a.colorToVideo&&a.colorToVideo[c]}}function G(){t.dispatch("selectThumbnail",b.useTabbedImmersiveView(a)?1:0)}function E(c,a,g,d){return m.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:c[0],
streamingUrls:a.url,swfUrl:g.swfUrl,foresterMetadataParams:g.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=b.isjQueryObjDefined(c.find("video"))?"HTML5":"FLASH";H.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){c.parent().css("z-index",8)},videounsupported:function(){G();H.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){G();H.postCountMetric("dppc_chromelessVideo:ERROR")},
ended:function(){u.seek(0)}},cuePoints:[{values:a.durationSeconds-1,type:"position",callback:function(a,b,g){a=g.durationSeconds-g.playheadTimeSeconds;c.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){c.parent().css({"background-color":"transparent","z-index":-1});G();l(this).show().css("opacity",1)})}}]})}function K(d){if("chromeful-video"===d.type||"chromeless-video"===d.type){var n=b.getVideoHash(d.color,d.index,a);if(-1===n)return-1;if("chromeful-video"===
d.type){d=y.width()/y.height();var h=parseInt(n.videoWidth,10),t=parseInt(n.videoHeight,10);b.updateAspectRatio(d,h,t,r);u?(u.show(),b.loadMediaIntoAiry(u,n,c,a.tabletWeb)):u=a.tabletWeb?p:b.createAiryInstanceForChromeful(r,n,c,null,a.autoplayVideo,y,f,I);b:if(b.useTabbedImmersiveView(a)){if(1<b.getVideosCount(A.getCurrentItem().color,a)){if(b.isDefined(M)){f.show();break b}M=l('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(a.staticStrings.watchMoreVideos);f.find("#videoCaption").append(M);
e.declarative.create(M,"videoIngressClick",g)}b.playVideoInImmersiveView(a,A.getCurrentItem().color)&&(e.declarative.create(r,"videoIngressClick",g),r.children().css("z-index","-1"),r.css("display","inline-block"))}else f.find("#videoCaption").text(a.staticStrings.playVideo),f.show();n=u;a.autoplayVideo&&n&&!z&&(b.toggleVideoCaption(f),n.setVolume(0),n.show(),n.play(),z=!0)}else u?(u.show(),b.loadMediaIntoAiry(u,n,c,a.tabletWeb),u.play(),f.show()):(u=E(r,n,c))&&u.play()}}function C(c,d,f){var n=h(d);
d=c;b.isDefined(n)&&0<n.length&&a.alwaysIncludeVideo&&c===a.maxAlts&&(I.find(".item:last").remove(),c--);b.isDefined(n)&&(l.each(n,function(d,f){if(c<a.maxAlts){var e=a.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",h={type:e,index:d,thumbnailIndex:c,variant:f.variant};g={type:"video-ingress",index:d,thumbnailIndex:c,variant:f.variant};b.useTabbedImmersiveView(a)&&("chromeful-video"===e&&(L+=" videoBlockIngress  videoBlockDarkIngress",f.thumb=f.thumb.replace("_PKmb-play-button-overlay-thumb",
"")),a.altsOnLeft||(L+=" a-align-top"));b.createThumbnail(h,f.thumb,I,L);if(b.useTabbedImmersiveView(a)){x(I.find(".videoBlockIngress img"),a.videoIngressATFSlateThumbURL);var h=1<n.length?"multiple-videos":"one-video",p=1<n.length?n.length+" "+a.staticStrings.multipleVideos:a.staticStrings.singleVideo;p&&I.find(".videoBlockIngress").append(I.find("#videoCount_template").clone().text(p).attr("id","videoCount")).addClass(h)}ba||(ba=!0,H.postCountMetric("chromeless-video"===e?"dppc_chromelessVideoAvailable":
"dppc_chromefulVideoAvailable"));c++}if(b.useTabbedImmersiveView(a))return!1}),q(I,d,c,f));return c}function x(c,a){var b=c.attr("src");if(b&&a){c.attr("src",a);var g=new Image;g.onload=function(a){c.attr("src",b)};g.src=b}}function J(c){u&&u.pause();c.data=g;c.clickTimeStamp=c.$event.timeStamp;var a="a"===c.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";t.dispatch("imageClick",c);H.postTimeMetric("dpcc_vse_videoingressclick",c.$event.timeStamp);H.postCountMetric(a)}function N(c){p=c.airy;
p.hide=function(){p.pause();e.$("#main-video-container").find(".vse-airy-container").hide()};p.show=function(){e.$("#main-video-container").find(".vse-airy-container").show();p.play()};p.getMediaSourceInfo=function(){return b.getMediaSourceInfo()}}var O,a,A,t,I,r,f,y,M,u,c,g,n,p,ba=!1,z=!1,L="videoThumbnail";return function(h,p,k,m){O=this;a=h;A=p;t=m;c=a.airyConfig;a.colorToVideo={};a.colorToVideo[a.landingAsinColor]=a.colorToVideo[a.defaultColor]=a.videos;O.render=function(c,g,d,h,p,t){I=h;r=p.find("#main-video-container");
f=r.parent().find("#video-canvas-caption");y=l("#main-image-container");a.useChromelessVideoPlayer||r.addClass("chromeful-container");n=C(g,c,t);K(A.getCurrentItem());b.useTabbedImmersiveView(a)&&e.declarative("videoIngressClick",["click"],J);c=A.getCurrentItem().color;g=b.getVideoHash(c,0,a);-1!==g&&a.tabletWeb&&(c=b.getNilgiriServiceAjaxRequest(a,c,g),w.get(e,"#main-video-container",c,function(){e.$("#main-video-container").find(".vse-airy-container").hide()},function(){e.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));
return n};O.update=function(c){var d=c.data;"ingress"!==d.type&&u&&(u.hide(),r.parent().css("z-index",-1),f.hide());if("swatchHover"===c.type)d.color===A.getCurrentItem().color?K(A.getCurrentItem()):c.captured||b.lazyLoadingRequired(d,A,a)&&!b.lazyLoadOnHoverEnabled(a)&&K(A.getCurrentItem());else if("chromeful-video"===d.type||"chromeless-video"===d.type)"mouseenter"===c.type&&H.postCountMetric("dpcc_videoThumbHovered_"+(d.thumbnailIndex+1)+"_"+n),K(d),a.usePeekHover&&"click"!==c.type||(b.selectGivenThumbnail(c.$declarativeParent,
I),"click"===c.type&&b.useTabbedImmersiveView(a)&&(H.postCountMetric("dpcc_videoThumbClicked_"+(d.thumbnailIndex+1)+"_"+n),g.action="videoIngressClick",g.clickTimeStamp=c.$event.timeStamp,t.dispatch("videoIngressClick",g),H.postTimeMetric("dpcc_vse_videoingressclick",c.$event.timeStamp)))};if(a.isDPXFeatureEnabled)e.on("triggerVideoAjax",d);e.on("vseAiry",N)}});"use strict";B.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric",
"imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(e,l,m,b,k,H,w,q,d,h){function G(c){return c.hiRes||c.large||c.main[c.main.length-1]}function E(){v.find("#ivTitle").click(function(){ka.hide()})}function K(){P=Pa?{type:"360-spin"}:Q.getCurrentItem()}function C(){var c=v.find("#ivStage"),a=ka.$container.find(".a-popover-wrapper"),b=a.find(".a-popover-inner"),a=a.height()-h.getDimension(b,"padding-top")-h.getDimension(b,"padding-bottom");v.css("height",a);var b=v.find("#ivTitle").outerHeight(!0),
g=v.find("#ivVariationSelection").outerHeight(!0),d=v.find("#ivMediaSelection").outerHeight(!0),f=v.find("#ivThumbs"),n=h.getDimension(f,"margin-top")+h.getDimension(f,"margin-bottom");f.css("height",a-b-g-d-n);v.find("#ivLargeImage").css("height",a);c.css("width",v.width()-h.getDimension(v,"padding-left")-h.getDimension(v,"padding-right")-v.find("#ivThumbColumn").width()-h.getDimension(c,"margin-left")-h.getDimension(c,"margin-right"))}function x(){v.find("#ivMediaSelect").change(function(){var c=
b(this).val();"all"===c?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").show(),"chromeful-video"===P.type&&v.find("#ivVideo_"+P.index).click()):"images"===c?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").hide(),"chromeful-video"===P.type&&(0===ca&&0===W?v.find("#iv360").click():0===ca?v.find("#ivHeroImage_0").click():v.find("#ivImage_0").click())):"videos"===c&&(v.find("#ivVideoList").show(),v.find("#ivThumbs").hide(),"chromeful-video"!==
P.type?v.find("#ivVideoList_0").click():v.find("#ivVideoList_"+P.index).click())})}function J(){var c=v.find("#ivStage").find("#ivLargeImage"),a=c.width(),b=c.height(),g=c.find(".fullscreen");g.removeAttr("style");var d=g.width(),f=g.height();0<g.length&&(g[0].naturalWidth&&(d=g[0].naturalWidth),g[0].naturalHeight&&(f=g[0].naturalHeight));c.css("cursor","auto");var d=0===d?1:d,f=0===f?1:f,n=Math.min(a/d,b/f),e=f*n,h=d*n;1>n?(Qa?c.css("cursor","url('"+D.staticImages.zoomIn+"'), auto"):(c.css("cursor",
"-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor","zoom-in")),Ba=!0):Ba=!1;d=Math.min(h,d);f=Math.min(e-20,f);g.css({"margin-top":(b-f)/2,"margin-left":(a-d)/2,height:f,width:d});c.css("visibility","visible");Ca=!1}function N(c){var a=v.find("#ivLargeImage");a.css("visibility","hidden");a.empty();h.animateStageIn(a);a.append(c);J()}function O(){X&&X.pause();v.find("#ivLarge360").css("display","none");v.find("#ivLargeVideo").css("display","none");v.find("#ivLargeImage").css("display",
"none");y()}function a(c){O();v.find("#ivLargeImage").css("display","block");var a;"hero-image"===c?k.isDefined(da)&&(a=G(da[P.index])):k.isDefined(na)&&(a=G(na[P.index]));if(k.isDefined(a)){v.find(".fullscreen").remove();var g=b("\x3cimg\x3e").attr("src",a).addClass("fullscreen"),d=v.find("#ivLargeImage");h.animateStageOut(d,function(){g.load(function(){N(g)});if(g[0].complete)N(g);else{d.empty();var c=(d.height()-104)/2,a=(d.width()-80)/2;b("\x3cimg\x3e").attr("src",D.staticImages.spinner).css({position:"relative",
top:c+"px",left:a+"px"}).appendTo(d)}})}}function A(){var c=parseInt(P.index,10)+1;c>=oa.length||v.find("#ivVideo_"+c).click()}function t(){var c;k.isDefined(oa)&&(c=oa[P.index]);if(k.isDefined(c)){O();var a=v.find("#ivLargeVideo").css("display","block");X?(X.isDetached()&&X.attach(a[0]),k.loadMediaIntoAiry(X,c,ya,D.tabletWeb),X.show()):(X=k.createAiryInstanceForChromeful(a,c,ya,"ImmersiveView"),ya.enableContinuousPlay&&X.bind("ended",A));X.play({isAsync:!0})}}function I(){K();var c;c="hero-image"===
P.type?v.find("#ivHeroImage_"+P.index):"image"===P.type?v.find("#ivImage_"+P.index):"chromeful-video"===P.type||"chromeless-video"===P.type?v.find("#ivVideo_"+P.index):"360-spin"===P.type?v.find("#iv360"):k.isDefined(da)?v.find("#ivHeroImage_"+P.index):v.find("#ivImage_"+P.index);k.isjQueryObjDefined(c)||(c=v.find("#ivImage_0"));r(c)}function r(c){v.find(".ivThumb").removeClass("selected");c.addClass("selected");c.hasClass("ivThumbVideo")?(P.type="chromeful-video",P.index=c.attr("id").split("_")[1],
t()):c.hasClass("ivHeroImage")?(P.type="hero-image",P.index=c.attr("id").split("_")[1],a(P.type)):c.hasClass("iv360Image")?(P.type="360-spin",P.index=0,f()):(P.type="image",P.index=c.attr("id").split("_")[1],a(P.type))}function f(){O();v.find("#ivLarge360").css("display","block");n();var c=v.find("#ivLarge360");c.css({opacity:0});setTimeout(function(){c.css({opacity:.4});h.animateStageIn(c)},200);u();w.postCountMetric("dppc_click360");ua=Date.now()}function y(){0<ua&&(M("dppc_duration360",Date.now()-
ua),ua=0)}function M(c,a){F.ue&&F.ue.count(c,a)}function u(){if(0<ra){var c=v.find(".iv360Hint");c.removeClass("iv360HintFaded");c.animate({opacity:1},200)}}function c(a,g){if(ra<a.length){var d=b("\x3cimg /\x3e").css({display:"block",width:6*pa+"px",height:va+"px"});d.hide();g.append(d);d.get(0).onload=function(){g.closest(document.documentElement).length&&(ra++,1===ra&&(u(),0<ua&&M("dppc_loadTime360",Date.now()-ua)),0<Ia&&M("dppc_perSpriteloadTime360",Date.now()-Ia),v.find("#iv360Spinner").hide(),
d.show(),za=5*T.imageLocations[Math.floor(Aa/T.imageLocations[0].length)][Aa%T.imageLocations[0].length],c(a,g))};d.attr("src",a[ra].replace(/(\._SP)\d+(,)\d+/,"$1"+wa+"$2"+xa));Ia=Date.now()}}function g(c){if(k.isDefined(T.spriteWidthSizes)&&0<T.spriteWidthSizes.length){var a=T.spriteWidthSizes,b=a.length,g=a[0],d=a[b-1];if(c<=g)return g;if(c>d)return d;for(g=0;g<b;g++)if(c>a[g]&&c<=a[g+1])return a[g+1]}else return c}function n(){var c=v.find("#ivLarge360");c.children("#image-360-sprites").length||
(c.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),c.css({"margin-left":0,"margin-top":0,width:c.parent().width(),height:c.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",D.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(c),Ja=!0,p())}function p(){if(k.isDefined(T.spriteURLs)&&
k.isDefined(v)&&Ja&&!Ka){var a=v.find("#ivLarge360"),d=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});k.isDefined(T.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",T.staticImages.hint360).appendTo(d);b("\x3cdiv\x3e").css({"text-align":"center"}).text(D.staticStrings.dragToSpin).appendTo(d);d.appendTo(a);var d=T.imageWidth,f=T.imageHeight,n=a.parent().width(),e=a.parent().height(),
h=0,p=0;d/f>n/e?(wa=g(n),xa=Math.round(f/d*wa),pa=Math.ceil(n),va=Math.ceil(xa/wa*n),p=(e-va)/2):(xa=g(e),wa=Math.round(d/f*xa),va=Math.ceil(e),pa=Math.ceil(wa/xa*e),h=(n-pa)/2);a.css({"margin-left":h,"margin-top":p,width:pa+"px",height:va+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*pa+"px");c(T.spriteURLs,v.find("#image-360-sprites"),0);d=v.find("#ivLarge360");d.bind("mousedown",B);d.bind("touchstart",ba);d.bind("touchmove",z);d.bind("touchend",L);
b(document).bind("mousemove",S);b(document).bind("mouseup",Y);k.isDefined(D.staticImages.grab)&&a.css("cursor","url('"+D.staticImages.grab+"'), auto");Ka=!0}}function ba(c){Da=!0;La=c.originalEvent.targetTouches[0].clientX}function z(c){Da&&(Z(c.originalEvent.targetTouches[0].clientX-La),La=c.originalEvent.targetTouches[0].clientX)}function L(c){Da&&(Da=!1)}function B(c){Ea=!0;Ma=c.originalEvent.clientX;k.isDefined(D.staticImages.grabbing)&&(c=v.find("#ivLarge360"),c.css("cursor","url('"+D.staticImages.grabbing+
"'), auto"),c.parents(".a-declarative").last().css("cursor","url('"+D.staticImages.grabbing+"'), auto"));return!1}function S(c){Ea&&(Z(c.originalEvent.clientX-Ma),Ma=c.originalEvent.clientX)}function Y(c){Ea&&(Ea=!1,k.isDefined(D.staticImages.grab)&&(c=v.find("#ivLarge360"),c.css("cursor","url('"+D.staticImages.grab+"'), auto"),c.parents(".a-declarative").last().css("cursor","auto")))}function Z(c){for(c=za-=c/pa*180;0>c;)c+=360;for(;360<c;)c-=360;za=c;var a;c=360;for(var b=0;b<ra;b++)for(var g=0;g<
T.imageLocations[b].length;g++){var d=Math.abs(za-5*T.imageLocations[b][g]);d<c&&(c=d,a=b*T.imageLocations[0].length+g)}a!==Aa&&(c=Math.floor(a/T.imageLocations[0].length),c!==Math.floor(Aa/T.imageLocations[0].length)&&(k.isDefined(Na)||(Na=document.createElement("canvas").getContext("2d")),b=v.find("#image-360-sprites").children(),Na.drawImage(b[c],0,0)),c=v.find(".iv360Hint").not(".iv360HintFaded"),k.isDefined(c)&&(c.addClass("iv360HintFaded"),c.animate({opacity:0},750)));Aa=a;c=a%T.imageLocations[0].length*
-1*pa;a=-1*Math.floor(a/T.imageLocations[0].length)*va;b=v.find("#ivLarge360").children("#image-360-sprites");b.css("-webkit-transform","translate3d("+c+"px, "+a+"px, 0)");b.css("transform","translate3d("+c+"px, "+a+"px, 0)")}function U(){v.delegate(".ivThumb","click",function(){var c=b(this);r(c)});v.delegate(".ivThumbVideoListOuter","click",function(){v.find(".ivThumbVideoListOuter").removeClass("selected");var c=b(this);c.addClass("selected");P.type="chromeful-video";P.index=c.attr("id").split("_")[1];
t()})}function ha(){X&&!X.isDetached()&&(ya.volume=X.getVolume(),X.detach(),!document.all||F.atob||document.addEventListener||(X=null));v.find("#ivLargeImage").empty();y()}function ja(c,a){return 0<a?a/2:Math.min(0,Math.max(a,c))}function ia(c){var a=sa.left-(c.pageX-Fa[0])*Ga;e.capabilities.rtl&&(a=sa.left-(b(F).width()-c.pageX-Fa[0])*Ga);c=sa.top-(c.pageY-Fa[1])*Ga;a=ja(a,Ha.left);c=ja(c,Ha.top);v.find(".fullscreen").css({left:a,top:c})}function ga(){v.delegate("#ivLargeImage","click",function(c){if(Ca)J();
else if(Ba){v.find(".fullscreen").removeAttr("style");if(Ba){var a=v.find("#ivLargeImage"),b=a.find(".fullscreen");Qa?a.css("cursor","url('"+D.staticImages.zoomOut+"'), auto"):(a.css("cursor","-webkit-zoom-out"),a.css("cursor","-moz-zoom-out"),a.css("cursor","zoom-out"));Ca=!0;var g=v.find("#ivLargeImage");Ha.left=g.width()-b.width();Ha.top=g.height()-b.height();var g=a.height()/2,d=a.width()/2;Fa=[a.offset().left+d,a.offset().top+g];sa.top=g-b.height()/2;sa.left=d-b.width()/2;b.css({position:"relative",
left:sa.left,top:sa.top});Ga=Math.max(b.height()/a.height(),b.width()/a.width())}ia(c)}});v.delegate("#ivLargeImage","mousemove",function(c){Ca&&ia(c)})}function la(c){if(k.isImmersiveViewEnabled(D,Q.getCurrentItem().color)){Pa=k.isDefined(c)&&"button-360-click"===c.action;q.isEnabled&&d.logImmersiveViewRequestServed(q);w.postCountMetric("dppc_immersiveViewOpened");if(k.isDefined(ka))ka.show();else{c=b("#auiImmersiveViewDiv");var a=b(F).height()-150,g=b(F).width()-75;ka=l.create(c,{name:"immersiveView",
activate:"onclick",width:g,height:a,popoverLabel:"ImmersiveView",hideHeader:!0});c.click()}if(Oa){v=b("#ivMain");c=Q.getCurrentItem().color;na=D.colorImages[c];da=D.heroImage[c];oa=D.useChildVideos?D.colorToVideo[c]:D.videos;ta=V()&&D.spin360ColorEnabled[c];T=V()?D.spin360ColorData[c]:void 0;K();ma=W=qa=ca=0;k.isDefined(da)&&(W=da.length);k.isDefined(na)&&(ca=na.length);k.isDefined(oa)&&(qa=oa.length);ta&&(ma=1);h.populateTitle(v.find("#ivTitle"),45,D);h.populateVariationSelection(v.find("#ivVariationSelection"));
c=v.find("#ivMediaSelect");0===ca+ma||0===qa?(c.parent().hide(),v.find("#ivThumbs").addClass("noMediaSelection")):(c.empty(),b("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(D.staticStrings.allMedia+" ("+(W+ca+ma+qa)+")").appendTo(c),b("\x3coption/\x3e").attr("value","images").text(D.staticStrings.images+" ("+(W+ca+ma)+")").appendTo(c),b("\x3coption/\x3e").attr("value","videos").text(D.staticStrings.videos+" ("+qa+")").appendTo(c),c.parent().show(),c.val("all"));c=v.find("#ivThumbs");
c.find(".ivRow").not(".placeholder").remove();for(var a=W+ca+qa+ma,f=g=0;g<a;)for(var n=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),p=0;3>p&&g<a;p++,g++,f++)if(f<W){var t=da[g].thumb,r=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(n);r.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(t)+'") center no-repeat')}else if(f>=W&&f<ca+W)t=na[g-W].thumb,r=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id",
"ivImage_"+(g-W)).appendTo(n),r.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(t)+'") center no-repeat');else if(f>=W+ca&&f<ca+W+ma)r=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(n),r.find(".ivThumbImage").css("background",'url("'+(k.isDefined(D.staticImages.icon360)?h.getResizedThumbnailURL(D.staticImages.icon360,!0):"")+'") center no-repeat');else if(t=oa[g-ca-W-ma],r=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(g-ca-W-ma)).appendTo(n),r.find(".ivThumbImage").css("background",'url("'+t.thumbUrl+'") center no-repeat'),k.isDefined(t)){var m={position:"triggerTop"},y=v.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");y.find(".ivVideoPopoverTitle").text(t.title);y.find(".ivVideoPopoverDuration").text(t.durationTimestamp);m.inlineContent=y[0];e.declarative.create(r,"a-tooltip",m)}c=v.find("#ivVideoList");c.find(".ivThumbVideoListOuter").not(".placeholder").remove();
a=c.find(".placeholder");for(g=0;g<qa;g++)f=oa[g],n=a.clone().removeClass("placeholder").appendTo(c),n.attr("id","ivVideoList_"+g),n.find(".ivThumbImage").css("background",'url("'+f.thumbUrl+'") center no-repeat'),n.find(".ivThumbTitle").text(f.title),n.find(".ivThumbDuration").text(f.durationTimestamp);v.find("#ivLarge360").empty();ra=0;Ka=Ja=!1;ya=D.airyConfig;Oa=!1;Ra()}}}function ea(c){var a=D.colorToAsin[c],b={},g=500;if(a&&a.asin){b.params={asin:a.asin};var d="360"+a.asin,f=Date.now();b.success=
function(a){M("dppc_asyncRequestTime360",Date.now()-f);a&&k.isDefined(a.spin360.spin360Model)?(k.ajaxState(d,"success"),D.spin360ColorData[c]=a.spin360.spin360Model,c===Q.getCurrentItem().color&&(T=D.spin360ColorData[c],p())):b.error()};b.error=function(){w.postCountMetric("dppc_asyncFailed360");M("dppc_asyncRequestTime360",Date.now()-f);g*=2;16E3>=g?setTimeout(function(){f=Date.now();H.load("/gp/product/features/apparel-main-image/360.html",b)},g):k.ajaxState(d,"fail")};k.ajaxState(d)&&"fail"!==
k.ajaxState(d)||(H.load("/gp/product/features/apparel-main-image/360.html",b),k.ajaxState(d,"sent"))}}function V(){return k.isDefined(D.spin360ConfigEnabled)&&D.spin360ConfigEnabled}var fa,D,Q,aa,ka,v,da,na,oa,W,ca,qa,ma,P,X,ya,T,ta,pa,va,xa,wa,Ma,La,Pa=!1,Ja=!1,Ka=!1,za=0,Aa=0,ua=0,Ia=0,Ea=!1,Da=!1,ra=0,Na,Qa=navigator.userAgent.match(/msie|trident/i),Oa=!0,Ca=!1,Ba=!1,Ha={},sa={},Ga,Fa,Ra=e.once(function(){x();U();ga();e.on("a:popover:afterUpdatePosition:immersiveView",C);e.on("a:popover:afterShow:immersiveView",
I);e.on("a:popover:afterHide:immersiveView",ha);E()});return function(c,a,g,d){fa=this;D=c;Q=a;q.refToModel=Q;aa=d;V()&&(D.spin360ColorData[D.landingAsinColor]=D.spin360ColorData[D.defaultColor],D.spin360ColorEnabled[D.landingAsinColor]=D.spin360ColorEnabled[D.defaultColor]);k.isDefined(D.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",h.addStyleCodeToURL(D.staticImages.icon360,"_FMpng_RI_"));fa.render=function(c,a,b,g,d,f){Oa=!0;V()&&D.spin360ColorEnabled[c]&&
!k.isDefined(D.spin360ColorData[c])&&(D.spin360ColorData[c]={},ea(c));k.isImmersiveViewEnabled(D,Q.getCurrentItem().color)&&V()&&D.spin360ColorEnabled[c]&&(a===D.maxAlts&&(c=g.find(".item.imageThumbnail"),b=g.find(".item.videoThumbnail"),k.isDefined(b)&&1<b.length?b.last().remove():c.last().remove(),a--),c=g.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),e.declarative.create(c,"button-360-click"),g.append(c),a++,w.postCountMetric("dppc_display360"));
return a};fa.update=function(c){};aa.register("imageClick",la);aa.register("button360Click",la)}});"use strict";B.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(e,l,m,b,k,H,w,q,d,h){function G(){var d=J.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),f=d.find(".a-popover-inner"),d=d.height()-h.getDimension(f,
"padding-top")-h.getDimension(f,"padding-bottom");b("#iv-tab-view-container").css("height",d);a=b("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==b(this).css("display")}).length;1<a?(b("#iv-tab-view-container ul.iv-tab-views li").parent().show(),f=b("#iv-tab-view-container ul.iv-tab-views li").parent().height(),d-=f):b("#iv-tab-view-container ul.iv-tab-views li").parent().hide();b("#iv-tab-view-container .iv-tab-content").css("height",d);e.trigger("dp:image-block:immersive-view:resize")}
function E(){e.trigger("dp:image-block:immersive-view:reset")}function K(a){if(k.isImmersiveViewEnabled(x,J.getCurrentItem().color)){q.isEnabled&&d.logImmersiveViewRequestServed(q);w.postCountMetric("dppc_immersiveViewOpened");k.isDefined(a)&&("button-360-click"===a.action?b("#iv360TabHeading").click():"videoIngressClick"===a.action?(A=a.clickTimeStamp,b("#ivVideosTabHeading").click()):b("#ivImagesTabHeading").click());var f=J.getImmersiveViewModalInstance();if(k.isDefined(f))f.show();else{a=b("#auiImmersiveViewDiv");
var f=Math.min(Math.max(b(F).height()-150,540),1080),h=Math.min(Math.max(b(F).width()-75,990),1980),f=l.create(a,{name:"immersiveView",activate:"onclick",width:h,height:f,popoverLabel:"ImmersiveView",hideHeader:!0});J.setImmersiveViewModalInstance(f);a.click()}O&&(O=!1,t(),e.trigger("dp:image-block:immersive-view:init"))}}var C,x,J,N,O=!0,a=0,A,t=e.once(function(){e.on("a:popover:afterUpdatePosition:immersiveView",G);e.on("a:popover:afterShow:immersiveView",G);e.on("a:popover:afterHide:immersiveView",
E)}),I=e.once(function(){var a=b("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",function(d){var h=a.filter(".iv-active");h.attr("id")!==b(this).attr("id")&&e.trigger("dp:ivTabs:"+h.find("a").attr("data-iv-tab-view")+":deselect",d);a.removeClass("iv-active");b(this).addClass("iv-active");b("#iv-tab-view-container .iv-tab-content").hide();h=b(this).find("a").attr("data-iv-tab-view");b("#"+h).show();"ivVideosTab"===h&&(d.clickTimeStamp=A||d.timeStamp);e.trigger("dp:ivTabs:"+h+":select",
d);w.postCountMetric("dppc_"+h);return!1})});return function(a,b,d,e){C=this;x=a;J=b;q.refToModel=J;N=e;C.render=function(a,c,b,d,f,e){w.postCountMetric("dpcc_altThumbs_"+c);O=!0};C.update=function(a){};C.getTitle=function(){};C.getVariationSelectionInfo=function(){};I();N.register("imageClick",K);N.register("button360Click",K);k.useTabbedImmersiveView(x)&&N.register("videoIngressClick",K)}});"use strict";B.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(e,l,m){return{load:function(b,
k){k=k||{};k.timeout=k.timeout||4E3;e.ajax(b,k)}}});"use strict";B.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(e,l,m,b,k,H,w,q){function d(c){return null!==c&&"undefined"!==typeof c}function h(c){var a=0;l.each(c,function(c,b){var d=parseInt(b[1],10);d>a&&(a=d)});return a}function G(c){var a=0;l.each(c,function(c,b){var d=parseInt(b[0],10);d>a&&(a=d)});return a}function E(c,a,b){a=a.width();
if(b.naturalMainImageSize)return a;c=h(c);0<c&&(a=Math.min(a,c));return a}function K(c,a,b){a=a.height();if(b.naturalMainImageSize)return a;c=G(c);0<c&&(a=Math.min(a,c));return a}function C(c){var a;l.each(c,function(c,b){d(a)||(a=b[1]/b[0])});return a||1}function x(c,a,b){a.fadeTo(500,0,function(){N(c,b);a.fadeTo(500,1)})}function J(c){c&&c.toggle()}function N(c,a){var b=a.find("img");d(b[c])&&l(b[c]).click()}function O(c,a){u[c]=a?a:u[c];return u[c]}function a(c,a,b){b=b||M;b=b.colorImages;if(1>
b.length||!d(b[c])||!d(a))return-1;var f=-1;l.each(b[c],function(c,b){b.variant===a&&(f=c)});return f}function A(c,a,b){b=b||M;b=b.colorImages;return!(d(b)&&d(b[c])&&d(b[c][a])&&d(b[c][a].main))||1>l.map(b[c][a].main,function(c,a){return a}).length?-1:b[c][a]}function t(c,a,b,d){d.parent().css("z-index",2);0!==b&&0!==a&&(a/=b,c>a?d.css("width",a/c*100+"%"):d.css("height",c/a*100+"%"))}function I(c,a){var b;if(b=c.useIV)b=c.colorImages&&c.colorImages[a]&&0<c.colorImages[a].length?!0:!1;w.isEnabled&&
(w.IVApplicaple=b,q.logImmersiveViewApplicability(l,w));return b}var r,f,y,M=l.extend(!0,{},k,H),u={};return{isDefined:d,isDefinedAndEmpty:function(c){return d(c)&&"object"===typeof c&&0===Object.keys(c).length},isUndefinedOrEmpty:function(c){return d(c)?"object"===typeof c&&0===Object.keys(c).length:!0},isDefinedAndNotEmpty:function(c){return d(c)?"object"===typeof c&&0<Object.keys(c).length:!1},isjQueryObjDefined:function(c){return 0!==c.length},getAspectRatio:C,getMaxHeightOfMainImage:K,getMaxWidthOfMainImage:E,
getMaxDimensionsOfMainImage:function(c,a,b){var d=K(c,a,b);a=E(c,a,b);c=C(c);b=a/c;a=Math.min(a,d*c);d=Math.min(d,b);return[d,a]},getContainerHeight:function(c,a,b){var f=c.get(0);c=0;if(d(f)){c=f.offsetWidth/a;c=Math.min(c,b);var e;a=M.mainImageHeightPartitions;b=M.mainImageMaxSizes;if(d(b)&&d(a)){for(var h=0,t=F.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,f=0;f<a.length;f++)t>a[f]&&(h=f+1);b.length>=h&&(e=b[h])}d(e)&&(c=Math.min(e[1],c))}return c},getColorFromState:function(c,
a){if(c){a=a||M;var b="";l.each(a.visualDimensions,function(a,d){c[d]&&(b+=" "+c[d])});return b&&b.substring(1)}},createThumbnail:function(c,a,b,f){var h=b.find(".template").clone().removeClass("template").addClass("item"),t=document.createElement("img");t.src=a;h.find(".placeHolder").replaceWith(t);(a=c.heroVideoVariant)&&"hero-image"===c.type&&c.variant===a&&h.addClass("heroImageThumbnail");d(f)&&h.addClass(f);e.declarative.create(h,"thumb-action",c);b.append(h)},selectGivenThumbnail:function(c,
a){var b=c.find(".a-button");a.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");b.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(c,a,d,h,e,t,k,I){var q=l.extend({},d.foresterMetadataParams);null!==h&&(q.method+="."+h);var y=[];a.disabledViewIds&&(y=a.disabledViewIds);return m.embed({parentElement:c[0],streamingUrls:a.url,contentId:a.mediaObjectId,contentMinAge:Number(a.minimumAge||"")||0,contentTitle:a.title,swfUrl:d.swfUrl,
foresterMetadataParams:q,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:a.slateUrl,postMediaSlate:a.slateUrl},videoAds:d.videoAds,bindings:{play:function(){"ImmersiveView"===h?r||(r=!0,b.postCountMetric("dppc_chromefulVideoPlayedIV")):f||(f=!0,b.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:a.durationSeconds-1,type:"position",callback:function(c,a,b){e&&(x(0,t,I),J(k))}}],disabledViewIds:y})},loadMediaIntoAiry:function(c,a,b,d){c&&c.getMediaSourceInfo()!==
a.url&&(d?(y={mediaSourceInfo:[a.url],contentId:a.mediaObjectId,refTag:"vse_ib_tablet_web"},c.loadMedia(y)):c.loadMedia({mediaSourceInfo:a.url,contentId:a.mediaObjectId,contentMinAge:Number(a.minimumAge||"")||0,contentTitle:a.title,slateImages:{preloadSlate:a.slateUrl,postMediaSlate:a.slateUrl}}))},showUnavailable:function(c){c&&(l("#imageBlock .unvailableVariation").html(c),l("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){l("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:x,
toggleVideoCaption:J,selectThumbnail:N,spinner:function(c,a){var b=l("#imageBlock .a-spinner").parent();0===b.length&&(b=l("\x3cdiv\x3e\x3c/div\x3e").append(l("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),c.append(b),b.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px",
"border-radius":"100%"}));a?b.show():b.hide();return b},rankedImagesReadyEvent:function(c){return"ranked-images-ready-for-"+c},ajaxState:O,getIndexForVariant:a,getImageHash:A,lazyLoadingRequired:function(c,b,d){b=Math.max(a(c.color,b.getCurrentItem().variant,d),0);b=-1!==A(c.color,b,d);c=d.colorToAsin[c.color]&&d.colorToAsin[c.color].asin;c=!c||"success"!==O(c);return!d.lazyLoadExperienceDisabled&&!b&&c},lazyLoadOnHoverEnabled:function(c){return!c.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:t,
repositionVideoBanner:function(c,a,b,d){setTimeout(function(){var b=c.width()/c.height();t(b,16,9,a)},d||0)},getVideosCount:function(c,a){return a.useChildVideos&&a.colorToVideo[c]?a.colorToVideo[c].length:a.videos?a.videos.length:0},getVideoHash:function(c,a,b){if(b.useChildVideos){if(!d(b.colorToVideo))return-1;c=b.colorToVideo[c]}else c=b.videos;return d(c)&&d(c[a])&&d(c[a].url)?c[a]:-1},isImmersiveViewEnabled:I,playVideoInImmersiveView:function(c,a){return I(c,a)&&c.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},
getMediaSourceInfo:function(){return d(y)?y.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,f){b=a.colorToAsin[b]&&a.colorToAsin[b].asin;b=d(b)?b:a.mediaAsin;return{pageContext:{page:"DetailPageTablet",placement:"ImageBlock",marketplaceID:f.marketPlaceID,locale:f.languageCode,requestId:a.requestId,product:{contentID:b,contentIDType:"ASIN"},video:{contentID:f.mediaObjectId,contentIDType:"ASIN",imageURL:f.slateUrl,videoURL:f.url}},configuration:{id:"div-light-player",type:"lightplayer",
binder:"lightplayer",assets:["VSECommonComponentAssets","Brila"],features:{features:{placementcontext:"vse_ib_tablet_web"}}}}}}});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(e,l,m,b,k){function H(a,d,h,f){if(!m.isjQueryObjDefined(a.find(".a-button-selected"))){var e=J.getCurrentItem();if(!f||"chromeless-video"!==e.type||!x.autoplayVideo){f=0;if("hero-image"===e.type){f=q(e.color,e.variant);if(-1===f)return;f=-1!==
f?f:0}var k=d+f;k>=h&&(f=0,k=d);d=b.getHeroImageHash(x,e.color,f);-1!==d&&(N.dispatch("updateModel",{data:{index:f,thumbnailIndex:k,variant:d.variant,type:"hero-image"}}),d=a.find(".item").get(k),m.selectGivenThumbnail(l(d),a))}}}function w(a,b,d){if("hero-video"===J.getCurrentItem().type)return a;b=x.heroImage&&x.heroImage[b];var f=a;m.isDefined(b)&&(l.each(b,function(b,d){a<x.maxAlts&&(m.createThumbnail({type:"hero-image",index:b,thumbnailIndex:a,variant:d.variant},d.thumb,O,"imageThumbnail"),a++)}),
H(O,f,a,d));return a}function q(a,b){var d=x.heroImage;if(1>d.length||!m.isDefined(d[a])||!m.isDefined(b))return-1;var f=-1;l.each(d[a],function(a,d){d.variant===b&&(f=a)});return f}function d(){if(a.length&&x.repositionHeroImage){var d=b.getHeroDimParams(x,J.getCurrentItem()),e;m.isDefined(d)&&(e=m.isDefined(d.xPos)?d.xPos+"px "+d.yPos+"px ":"center "+d.yPos+"px ",a.css({"background-position":e,"background-size":d.width+"px "+d.height+"px ","max-width":d.width+"px ","min-height":d.height+"px ",filter:"",
"-ms-filter":""}))}}function h(d,e,h,f){if(a.length&&d&&e){if("function"===typeof h||f){var k=new Image;k.onload=f?function(){a.css("background-image",'url("'+d+'")')}:h;k.src=d}h=e[1];var k=e[0],l;f||a.css({"background-image":'url("'+d+'")'});x.repositionHeroImage&&(e=b.getHeroDimParams(x,J.getCurrentItem(),e),m.isDefined(e)&&(h=e.width,k=e.height,l=m.isDefined(e.xPos)?e.xPos+"px "+e.yPos+"px ":"center "+e.yPos+"px "));a.css({"background-position":l,"background-size":h+"px "+k+"px ","max-width":h+
"px ","min-height":k+"px ",filter:"","-ms-filter":""})}}function G(a,d,e,f){a=b.getHeroImageHash(x,a,d);if(-1===a)return-1;d=l.map(a.main,function(a,b){return b})[0];h(d,a.main[d],e,f)}function E(a,d,e){if("hero-image"!==a.type)return-1;var f=q(a.color,J.getCurrentItem().variant),f=-1!==f?f:0;if(-1===b.getHeroImageHash(x,a.color,f))return-1;var h=J.getCurrentItem();a.thumbnailIndex=h.thumbnailIndex;a.type=h.type;a.variant=h.variant;a.index=f;K(a,d,e)}function K(d,h,k){var f=b.getHeroImageHash(x,d.color,
d.index),l;l=d&&A&&e.equals(d,A)?!0:!1;A||(A=d);if(!l&&d||h)G(d.color,d.index,h,k),A=d;a.removeClass("hide-background");e.trigger("dp:image-block:update",f)}var C,x,J,N,O,a,A={};return function(b,e,h,f){C=this;x=b;J=e;N=f;x.heroImage[x.landingAsinColor]=x.heroImage[x.defaultColor];C.render=function(b,d,f,c,g,e,h){O=c;a=l("#heroImage");b=w(d,b,e);E(J.getCurrentItem(),h,e);return b};C.update=function(b){var d=b.data;"ingress"!==d.type&&a.addClass("hide-background");"swatchHover"===b.type?b.captured||
(d.type=J.getCurrentItem().type,-1!==E(d)&&(b.captured=!0)):"hero-image"===d.type&&(K(d),"click"!==b.type&&x.usePeekHover||m.selectGivenThumbnail(b.$declarativeParent,O))};N.register("resize",d)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(e,l,m,b,k){var H,w,q,d;return function(b,k,l,K){H=this;w=b;q=K;H.render=function(b,h,k,l,q,a,G){d=l;H=this;k=w.maxAlts;l=h;q=w.colorImages[b]?w.colorImages[b].length:
0;q+=m.getVideosCount(b,w);b=w.heroImage[b];a=0;b&&(a=b.length);b=q+a;b>k&&(k=b-k,b=d.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),k+="+",l={type:"ingress",index:0,thumbnailIndex:h,variant:""},b.find("#altIngressText").append(k),e.declarative.create(b,"thumb-action",l),d.append(b),l=h++);return l};H.update=function(b){"ingress"===b.data.type&&"click"===b.type&&q.dispatch("imageClick",b)}}});"use strict";B.when("A","jQuery","imageBlockUtils").register("ImageBlockState",
function(e,l,m){return function(b,e,l){this.getImageHash=function(e){var k=l.getCurrentItem();e=m.getIndexForVariant(k.color,e||"MAIN",b);return m.getImageHash(k.color,e,b)};this.onImageUpdateForTwister=function(b){e.register("updateSelection",function(e){"swatchClick"===e.type&&"function"===typeof b&&b()})}}});"use strict";B.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(e,l,m){function b(b,e){var d;if(e.repositionHeroImage){d=b[1];var h=b[0];if(768>=(F.innerHeight||
document.documentElement.clientHeight||document.body.clientHeight))d*=.7,h*=.7;else{var k=((F.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,k=Math.max(Math.min(k,1),0);d*=.7+.3*k;h*=.7+.3*k}d=[d,h]}return d}function k(b,e,d){var h;if(d.repositionHeroImage){var k=F.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(m.isDefined(d)){h=Math.max((k-Math.min(1500,b))/2,0);var l=Math.max((k-b)/2,0);h-=l;k=Math.max(Math.min(k,
1500),1024);h=h+(k-420-23)/2-b/e[1]*d}}return h}function H(b,e,d){b=b.heroImage;return!(m.isDefined(b)&&m.isDefined(b[e])&&m.isDefined(b[e][d])&&m.isDefined(b[e][d].main))||1>l.map(b[e][d].main,function(b,d){return d}).length?-1:b[e][d]}return{getHeroImageHash:H,getHeroDimParams:function(e,q,d){if(e.repositionHeroImage){if(!m.isDefined(d)){d=H(e,q.color,q.index);if(-1===d)return;q=l.map(d.main,function(b,d){return d})[0];d=d.main[q]}q=b(d,e);e=k(q[0],d,e);return{height:q[1],width:q[0],xPos:e,yPos:75}}}}});
"use strict";B.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(e,l,m,b,k,H,w){function q(b,d){var k=e.copy(b);if(w.isDefined(b)&&b.length>d){try{for(var l=-1,m=0;m<b.length;m++){var q=b.charAt(m);if(" "===q||"."===q||"?"===q||";"===q||","===q||":"===q)l=m;if(m===d-4){k=b.substring(0,-1===l?m:l);break}}}catch(J){k=b.substring(0,d-3)}k+="..."}return k}function d(b,d){var e=b.lastIndexOf(".");return b="_"===b.charAt(e-
1)?b.substring(0,e-1)+d+b.substring(e):b.substring(0,e)+"."+d+b.substring(e)}return{getDimension:function(b,d){var e=parseInt(b.css(d),10);return isNaN(e)?0:e},attachTabSelectHandler:function(b,d){e.on("dp:ivTabs:"+b+":select",d)},attachTabDeselectHandler:function(b,d){e.on("dp:ivTabs:"+b+":deselect",d)},attachImmersiveViewResizeHandler:function(b){e.on("dp:image-block:immersive-view:resize",b)},detachImmersiveViewResizeHandler:function(b){e.off("dp:image-block:immersive-view:resize",b)},attachImmersiveViewResetHandler:function(b){e.on("a:popover:afterHide:immersiveView",
b)},hideTabHeading:function(b){l("#"+b).hide()},unhideTabHeading:function(b){l("#"+b).show()},addStyleCodeToURL:d,getResizedThumbnailURL:function(b,e){b=b.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");b=b.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");b=b.replace(/\._CB\d+_SS\d+_/,"");var k="_AA50_";e&&(k+="FMpng_RI_");return d(b,k)},populateVariationSelection:function(b){if(w.isDefined(F.DetailPage)&&w.isDefined(F.DetailPage.StateController)){b.empty();
var d=F.DetailPage.StateController.getState(),e=d.variation_label_order,k;for(k in e)if(e.hasOwnProperty(k)){var m=e[k],q=d.selected_variations[m],m=d.variation_display_labels[m];q&&l("\x3cdiv/\x3e").addClass("ivVariations").text(m+":"+q).appendTo(b)}}},populateTitle:function(b,d,e){b.attr("title",e.title);b.text(q(e.title,d))},animateStageIn:function(b){b.animate({opacity:1},200)},animateStageOut:function(b,d){b.animate({opacity:.4},100,d)},logError:function(b,d,e,k){F.ueLogError&&F.ueLogError(k,
{logLevel:b,attribution:d,message:e})}}});"use strict";B.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(e,l,m,b,k,H,w,q){function d(){var a=r.getCurrentItem().color;M=I.colorImages[a];y=I.heroImage[a];u=c=0;k.isDefined(y)&&(u=y.length);k.isDefined(M)&&(c=M.length)}function h(a){return a.hiRes||a.large||a.main[a.main.length-1]}function G(){var a=f.find("#ivStage").find("#ivLargeImage"),
b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),g=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(g=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,g=0===g?1:g,k=Math.min(b/e,c/g),h=g*k,l=e*k;1>k?(n?a.css("cursor","url('"+I.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),z=!0):z=!1;e=Math.min(l,e);g=Math.min(h-20,g);d.css({"margin-top":(c-
g)/2,"margin-left":(b-e)/2,height:g,width:e});a.css("visibility","visible");F=!1}function E(a){var b=f.find("#ivLargeImage");b.css("visibility","hidden");b.empty();q.animateStageIn(b);b.append(a);G()}function B(a){f.find("#ivLargeImage").css("display","none");f.find("#ivLargeImage").css("display","block");var c;"hero-image"===a?k.isDefined(y)&&(c=h(y[g.index])):k.isDefined(M)&&(c=h(M[g.index]));if(k.isDefined(c)){f.find(".fullscreen").remove();var d=b("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),
e=f.find("#ivLargeImage");q.animateStageOut(e,function(){d.load(function(){E(d)});if(d[0].complete)E(d);else{e.empty();var a=(e.height()-104)/2,c=(e.width()-80)/2;b("\x3cimg\x3e").attr("src",I.staticImages.spinner).css({position:"relative",top:a+"px",left:c+"px"}).appendTo(e)}})}}function C(a){f.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?g.type="hero-image":g.type="image";g.index=a.attr("id").split("_")[1];B(g.type);w.postCountMetric("dpcc_iv_thumbCLick_"+
(parseInt(g.index,10)+1)+"_"+(u+c))}function x(){f.delegate(".ivThumb","click",function(){var a=b(this);C(a)})}function J(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function N(a){var b=R.top-(a.pageY-Y[1])*S;a=J(R.left-(a.pageX-Y[0])*S,L.left);b=J(b,L.top);f.find(".fullscreen").css({left:a,top:b})}function O(){f.delegate("#ivLargeImage","click",function(a){if(F)G();else if(z){f.find(".fullscreen").removeAttr("style");if(z){var b=f.find("#ivLargeImage"),c=b.find(".fullscreen");n?b.css("cursor",
"url('"+I.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));F=!0;var d=f.find("#ivLargeImage");L.left=d.width()-c.width();L.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Y=[b.offset().left+e,b.offset().top+d];R.top=d-c.height()/2;R.left=e-c.width()/2;c.css({position:"relative",left:R.left,top:R.top});S=Math.max(c.height()/b.height(),c.width()/b.width())}N(a);w.postCountMetric("dpcc_iv_largeImageCLick")}});
f.delegate("#ivLargeImage","mousemove",function(a){F&&N(a)})}function a(){f.find("#ivLargeImage").empty()}function A(a){if(p){f=b("#ivMain");d();g=r.getCurrentItem();q.populateTitle(f.find("#ivTitle"),160,I);q.populateVariationSelection(f.find("#ivVariationSelection"));a=f.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var e=u+c,h=0,l=0;h<e;)for(var n=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),m=0;4>m&&h<e;m++,h++,l++)if(l<u){var t=y[h].thumb,
A=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+h).appendTo(n);A.find(".ivThumbImage").css("background",'url("'+q.getResizedThumbnailURL(t)+'") center no-repeat')}else l>=u&&l<c+u&&(t=M[h-u].thumb,A=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(h-u)).appendTo(n),A.find(".ivThumbImage").css("background",'url("'+q.getResizedThumbnailURL(t)+'") center no-repeat'));Z();p=!1}a=b("#ivImagesTab").height();
f.css("height",a);e=f.find("#ivTitle").outerHeight(!0);h=f.find("#ivVariationSelection").outerHeight(!0);l=f.find("#ivThumbs");n=q.getDimension(l,"margin-top")+q.getDimension(l,"margin-bottom");l.css("height",a-e-h-n);f.find("#ivLargeImage").css("height",a);a=f.find("#ivStage");e=f[0]&&f[0].getBoundingClientRect&&Math.floor(f[0].getBoundingClientRect().width)||f.width();a.css("width",e-q.getDimension(f,"padding-left")-q.getDimension(f,"padding-right")-f.find("#ivThumbColumn").width()-q.getDimension(a,
"margin-left")-q.getDimension(a,"margin-right"));g=r.getCurrentItem();a="hero-image"===g.type?f.find("#ivHeroImage_"+g.index):"image"===g.type?f.find("#ivImage_"+g.index):k.isDefined(y)?f.find("#ivHeroImage_"+g.index):f.find("#ivImage_"+g.index);k.isjQueryObjDefined(a)||(a=f.find("#ivImage_0"));C(a)}var t,I,r,f,y,M,u,c,g,n=navigator.userAgent.match(/msie|trident/i),p=!0,F=!1,z=!1,L={},R={},S,Y,p=!0,Z=e.once(function(){x();O();q.attachImmersiveViewResizeHandler(A);q.attachTabDeselectHandler("ivImagesTab",
a)});return function(a,e,f,g){t=this;I=a;r=e;t.render=function(a,e,f,g,k,h){p=!0;d();0===u+c?q.hideTabHeading("ivImagesTabHeading"):q.unhideTabHeading("ivImagesTabHeading");1===u+c?b("#ivThumbs").hide():b("#ivThumbs").show()};t.update=function(a){};q.attachTabSelectHandler("ivImagesTab",A)}});"use strict";B.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",
function(e,l,m,b,k,H,w,q,d,h){function G(){r.delegate(".ivThumb","click",function(){var a=b(this);r.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")&&(f.type="chromeful-video",f.index=a.attr("id").split("_")[1])})}function E(){var a=b("#ivVideosTab").height();r.css("height",a);var c=r.find(".vse-video-block");M=a-q.getDimension(r,"padding-top")-q.getDimension(r,"padding-bottom");c.css({"max-height":a,overflow:"hidden"});if(ba)r.css({"max-width":Math.floor(1.77*
M)});else{var a=r.find(".vse-airy-container"),c=r.find(".vse-ib-metadata"),d=Math.floor(M-q.getDimension(c,"height")),e=Math.floor(1.77*d);a.css({"max-height":d,"max-width":e});c.css("max-width",e);z&&(a=r.find(".vse-vertical-scroll"),c=q.getDimension(a,"margin-top")+q.getDimension(a,"margin-bottom"),a.css("max-height",M-c))}}function B(){C();y&&y.pause();L=!1;n=!0;g=null}function C(){L=!1;y&&y.pause()}function x(a){g=a.clickTimeStamp;p&&(h.get(e,"#ivVideoBlock",I,Z,U),r=b("#ivVideoBlock"),t.getCurrentItem(),
f=t.getCurrentItem(),R());E();L=!0;p=!1;O()}function J(a){p&&(r=b("#ivVideoBlock"),t.getCurrentItem(),f=t.getCurrentItem(),R());L&&O();E()}function N(a){y=a.airy;L&&y.play({isAsync:!0})}function O(){if(y&&(y.play({isAsync:!0,eventTimestamp:g||(new Date).getTime()}),w.postCountMetric("dpcc_vse_videoBlock_video_played"),n)){var a=F.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,w.postTimeMetric("dpcc_vse_vitff",a),n=!1)}}var a,A,t,I,r,f,y,M,u,c,g,n=!0,p=!0,ba=!1,z=!1,L=!1,R=
e.once(function(){G();q.attachImmersiveViewResizeHandler(J);q.attachTabDeselectHandler("ivVideosTab",C);q.attachImmersiveViewResetHandler(B)}),S=function(a,c,d){b("#ivVideoBlockSpinner").addClass("aok-hidden");w.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+c.placement);a=t.getCurrentItem().color;a=k.getVideoHash(a,0,A);y||(y=k.createAiryInstanceForChromeful(b("#ivVideoBlock"),a,A.airyConfig,"ImmersiveView"));ba=!0;b("#ivVideoBlock").css({"max-width":1.77*M,margin:"0 auto"});L&&ba&&y.play({isAsync:!0})},
Y=function(a,c,d){p||h.get(a,"#ivVideoBlock",I,Z,U);b("#ivVideoBlockSpinner").addClass("aok-hidden")},Z=function(a,b,c){z=!0;E();L&&O()},U=function(a,b,c){w.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(b,f,g,h){a=this;A=b;t=f;a.render=function(a,b,f,g,h,l){a=t.getCurrentItem().color;b=k.getVideoHash(a,0,A);u=A.colorToAsin[a]&&A.colorToAsin[a].asin;u=k.isDefined(u)?u:A.mediaAsin;c=null!==A.vseVideoDataSourceTreatment&&"T1"===
A.vseVideoDataSourceTreatment?"ASIN":"physicalID";p=!0;-1===b?q.hideTabHeading("ivVideosTabHeading"):(q.unhideTabHeading("ivVideosTabHeading"),I={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:b.marketPlaceID,locale:b.languageCode,product:{contentID:u,contentIDType:"ASIN"},video:{contentID:b.mediaObjectId,contentIDType:c,videoURL:b.url,imageURL:b.slateUrl},requestId:A.dpRequestId,metadata:{ProductTitle:A.title}},d.get(e,"#ivVideoBlock",I,Y,S))};a.update=function(a){};q.attachTabSelectHandler("ivVideosTab",
x);e.on("vseAiry",N)}});"use strict";B.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(e,l,m,b,k,B,w,q,d){function h(){var a=b("#iv360Tab").height();z.css("height",a);var c=z.find("#ivTitle360").outerHeight(!0),e=z.find("#ivVariationSelection360").outerHeight(!0),f=z.find("#ivThumbs360"),g=d.getDimension(f,"margin-top")+d.getDimension(f,"margin-bottom");f.css("height",
a-c-e-g);a=z.find("#ivStage360");c=z[0]&&z[0].getBoundingClientRect&&Math.floor(z[0].getBoundingClientRect().width)||z.width();a.css("width",c-d.getDimension(z,"padding-left")-d.getDimension(z,"padding-right")-z.find("#ivThumbColumn360").width()-d.getDimension(a,"margin-left")-d.getDimension(a,"margin-right"))}function F(){x();var a=z.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});d.animateStageIn(a)},200);E()}function E(){if(0<Q){var a=z.find(".iv360Hint");a.removeClass("iv360HintFaded");
a.animate({opacity:1},200)}}function K(a,c){if(Q<a.length){var d=b("\x3cimg /\x3e").css({display:"block",width:6*R+"px",height:S+"px"});d.hide();c.append(d);d.get(0).onload=function(){c.closest(document.documentElement).length&&(Q++,1===Q&&(E(),0<ea&&(w.time("dppc_loadTime360",Date.now()-ea,p.mediaAsin),q.postTimeMetric("dppc_loadTime360",Date.now()-ea))),0<V&&(w.time("dppc_perSpriteloadTime360",Date.now()-V,p.mediaAsin),q.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-V)),z.find("#iv360Spinner").hide(),
d.show(),ga=5*L.imageLocations[Math.floor(la/L.imageLocations[0].length)][la%L.imageLocations[0].length],K(a,c))};d.attr("src",a[Q].replace(/(\._SP)\d+(,)\d+/,"$1"+Z+"$2"+Y));V=Date.now()}}function C(a){if(k.isDefined(L.spriteWidthSizes)&&0<L.spriteWidthSizes.length){var b=L.spriteWidthSizes,c=b.length,d=b[0],e=b[c-1];if(a<=d)return d;if(a>e)return e;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function x(){var a=z.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),
a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",p.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ja=!0,J())}function J(){if(k.isDefined(L.spriteURLs)&&k.isDefined(z)&&ja&&!ia){var c=z.find("#ivLarge360"),
d=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});k.isDefined(L.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",L.staticImages.hint360).appendTo(d);b("\x3cdiv\x3e").css({"text-align":"center"}).text(p.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=L.imageWidth,e=L.imageHeight,f=c.parent().width(),g=c.parent().height(),h=0,l=0;d/e>f/g?(Z=C(f),Y=Math.round(e/
d*Z),R=Math.ceil(f),S=Math.ceil(Y/Z*f),l=(g-S)/2):(Y=C(g),Z=Math.round(d/e*Y),S=Math.ceil(g),R=Math.ceil(Z/Y*g),h=(f-R)/2);c.css({"margin-left":h,"margin-top":l,width:R+"px",height:S+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*R+"px");K(L.spriteURLs,z.find("#image-360-sprites"),0);d=z.find("#ivLarge360");d.bind("mousedown",A);d.bind("touchstart",N);d.bind("touchmove",O);d.bind("touchend",a);b(document).bind("mousemove",t);b(document).bind("mouseup",
I);k.isDefined(p.staticImages.grab)&&c.css("cursor","url('"+p.staticImages.grab+"'), auto");ia=!0}}function N(a){D=!0;ha=a.originalEvent.targetTouches[0].clientX}function O(a){D&&(r(a.originalEvent.targetTouches[0].clientX-ha),ha=a.originalEvent.targetTouches[0].clientX)}function a(a){D&&(D=!1)}function A(a){fa=!0;U=a.originalEvent.clientX;k.isDefined(p.staticImages.grabbing)&&(a=z.find("#ivLarge360"),a.css("cursor","url('"+p.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+p.staticImages.grabbing+"'), auto"));return!1}function t(a){fa&&(r(a.originalEvent.clientX-U),U=a.originalEvent.clientX)}function I(a){fa&&(fa=!1,k.isDefined(p.staticImages.grab)&&(a=z.find("#ivLarge360"),a.css("cursor","url('"+p.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function r(a){ga-=a/R*180;ka&&(w.count("dppc_360dragToSpin",p.mediaAsin),q.postCountMetric("dppc_360dragToSpin"));ka=!1;for(a=ga;0>a;)a+=360;for(;360<a;)a-=360;ga=a;var b;a=360;
for(var c=0;c<Q;c++)for(var d=0;d<L.imageLocations[c].length;d++){var e=Math.abs(ga-5*L.imageLocations[c][d]);e<a&&(a=e,b=c*L.imageLocations[0].length+d)}b!==la&&(a=Math.floor(b/L.imageLocations[0].length),a!==Math.floor(la/L.imageLocations[0].length)&&(k.isDefined(aa)||(aa=document.createElement("canvas").getContext("2d")),c=z.find("#image-360-sprites").children(),aa.drawImage(c[a],0,0)),a=z.find(".iv360Hint").not(".iv360HintFaded"),k.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},
750)));la=b;a=b%L.imageLocations[0].length*-1*R;b=-1*Math.floor(b/L.imageLocations[0].length)*S;c=z.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function f(){if(da){z=b("#ivMain360");var a=ba.getCurrentItem().color;M()&&u(a);L=M()?p.spin360ColorData[a]:void 0;d.populateTitle(z.find("#ivTitle360"),160,p);d.populateVariationSelection(z.find("#ivVariationSelection360"));z.find("#ivLarge360").empty();
Q=0;ia=ja=!1;la=ga=0;na();da=!1}0!==b("#iv360Tab").height()&&(d.detachImmersiveViewResizeHandler(f),h(),F(),ea=Date.now(),v=ka=!0,w.count("dppc_click360",p.mediaAsin),q.postCountMetric("dppc_click360"))}function y(a){var b=p.colorToAsin[a],c={},d=500;if(!b||!b.asin)if(a===p.defaultColor)b={asin:p.winningAsin};else return;c.params={asin:b.asin};var e="360"+b.asin,f=Date.now();c.success=function(b){w.time("dppc_asyncRequestTime360",Date.now()-f,p.mediaAsin);q.postTimeMetric("dppc_asyncRequestTime360",
Date.now()-f);b&&k.isDefined(b.spin360.spin360Model)?(k.ajaxState(e,"success"),p.spin360ColorData[a]=b.spin360.spin360Model,a===ba.getCurrentItem().color&&(L=p.spin360ColorData[a],J())):c.error()};c.error=function(){w.count("dppc_asyncFailed360",p.mediaAsin);q.postCountMetric("dppc_asyncFailed360");w.time("dppc_asyncRequestTime360",Date.now()-f,p.mediaAsin);q.postTimeMetric("dppc_asyncRequestTime360",Date.now()-f);d*=2;16E3>=d?setTimeout(function(){f=Date.now();B.load("/gp/product/features/apparel-main-image/360.html",
c)},d):k.ajaxState(e,"fail")};k.ajaxState(e)&&"fail"!==k.ajaxState(e)||(B.load("/gp/product/features/apparel-main-image/360.html",c),k.ajaxState(e,"sent"))}function M(){return k.isDefined(p.spin360ConfigEnabled)&&p.spin360ConfigEnabled}function u(a){return k.isDefinedAndNotEmpty(p.spin360ColorData[a])?!0:p.spin360ColorEnabled.hasOwnProperty(a)?p.landingAsinColor===p.defaultColor?c():p.spin360ColorEnabled[a]:c()}function c(){return k.isDefined(p.spin360LazyLoadEnabled)&&p.spin360LazyLoadEnabled}function g(){v&&
(w.time("dppc_duration360",Date.now()-ea,p.mediaAsin),q.postTimeMetric("dppc_duration360",Date.now()-ea),v=!1)}var n,p,ba,z,L,R,S,Y,Z,U,ha,ja=!1,ia=!1,ga=0,la=0,ea=0,V=0,fa=!1,D=!1,Q=0,aa,ka=!0,v=!1,da=!0,na=e.once(function(){d.attachImmersiveViewResizeHandler(f);d.attachImmersiveViewResizeHandler(h);d.attachImmersiveViewResetHandler(g);d.attachTabDeselectHandler("iv360Tab",g)});return function(a,g,h,l){n=this;p=a;ba=g;M()&&!c()&&(p.spin360ColorData[p.landingAsinColor]=p.spin360ColorData[p.defaultColor],
p.spin360ColorEnabled[p.landingAsinColor]=p.spin360ColorEnabled[p.defaultColor]);k.isDefined(p.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",d.addStyleCodeToURL(p.staticImages.icon360,"_FMpng_RI_"));n.render=function(a,c,f,g,h,l){if(a===p.landingAsinColor||p.spin360ColorEnabled.hasOwnProperty(a))return da=!0,M()&&u(a)?(k.isUndefinedOrEmpty(p.spin360ColorData[a])&&(p.spin360ColorData[a]={},y(a)),b("#ivThumbs360").hide(),d.unhideTabHeading("iv360TabHeading")):
d.hideTabHeading("iv360TabHeading"),k.isImmersiveViewEnabled(p,ba.getCurrentItem().color)&&M()&&u(a)&&(c===p.maxAlts&&(a=g.find(".item.imageThumbnail"),f=g.find(".item.videoThumbnail"),k.isDefined(f)&&1<f.length?f.last().remove():a.last().remove(),c--),a=g.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),e.declarative.create(a,"button-360-click"),g.append(a),c++,w.count("dppc_display360",p.mediaAsin),q.postCountMetric("dppc_display360")),
c};n.update=function(a){};d.attachTabSelectHandler("iv360Tab",f)}});B.register("nexusLogger360",function(){return{count:function(e,l){F.ue&&F.ue.event({asin:l,metricName:e,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(e,l,m){F.ue&&F.ue.event({asin:m,metricName:e,metricValue:l},"hit-360","hit360.clientEvent.3")}}});"use strict";B.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(e,l){try{var m=F.location.host,b={dub:"https://www.amazon.co.uk/vap/ew/",
pdx:"https://www.amazon.co.jp/vap/ew/"},k=m.split(".")[1],H=-1===m.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==b[k]?b[k]:"https://www.amazon.com/vap/ew/",w="vse_lazyLoaderHook:success:",q="vse_lazyLoaderHook:error:",d="vse_preLoaderHook:success:",h="vse_preLoaderHook:error:",G="vse_lightPlayerLoaderHook:success:",E="vse_lightPlayerLoaderHook:error:",K=4E3,C=3}catch(x){l.logError("FATAL","vse_ns_desktop","[Domain] ",x)}B.register("vse_ns_preLoaderHook",function(){function b(k,m){try{var a=k.A,
q=k.block,t=k.request,w=k.handleFailure,r=k.handleSuccess,f=a.$;m--;var y=C-m-1,x=a.now();a.ajax(H+"componentbuilder",{params:t,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:t.timeout||K,withCredentials:!0,success:function(b){var g=a.now()-x;e.postTimeMetric(d,g);e.postCountMetric(d+t.page+":"+t.placement+":"+y);f(q).html(b);r(a,t,b)},error:function(c){e.postCountMetric(h+t.page+":"+t.placement+":"+y);(0===c.http.status||500<=c.http.status&&599>=c.http.status)&&
0<m?b(k,m):(e.postCountMetric(h,1),w(a,t,c))}})}catch(u){l.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",u)}}return{get:function(d,e,a,k,h){b({A:d,block:e,request:a,handleFailure:h,handleSuccess:k},C)}}});B.register("vse_ns_lazyLoaderHook",function(){function b(d,k,a){try{var h=d.A,m=d.context,x=d.handleFailure,r=d.handleSuccess;k.attr("data-configuration");var f=atob(k.attr("data-configuration")),y=JSON.parse(f),B={pageContext:m,configuration:y},u=h.now();a--;var c=C-a-1;h.ajax(H+"subcomponent/"+
y.type,{params:B,paramsFormat:"json",method:"post",contentType:"application/json",timeout:m.timeout||K,withCredentials:!0,success:function(a){var b=h.now()-u;e.postTimeMetric(w,b);e.postCountMetric(w+m.page+":"+m.placement+":"+y.type+":"+c);k.html(a);r(h,B,a)},error:function(f){e.postCountMetric(q+m.page+":"+m.placement+":"+y.type+":"+c);(0===f.http.status||500<=f.http.status&&599>=f.http.status)&&0<a?b(d,k,a):(e.postCountMetric(q,1),x(h,B,f))}})}catch(g){l.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",
g)}}return{get:function(d,e,a,k,h){var l=d.$;l(e+" div[data-configuration]").each(function(){b({A:d,context:a,handleFailure:h,handleSuccess:k},l(this),C)})}}});B.register("vse_ns_videoPlayer",function(){function b(d,k,a){try{var h=d.A,m=d.block,q=d.request,r=d.handleFailure,f=d.handleSuccess,x=h.$;a--;var w=C-a-1,u=h.now();h.ajax(H+"subcomponent/lightvideoplayer",{params:q,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:q.timeout||K,withCredentials:!0,success:function(a){var b=
h.now()-u;e.postTimeMetric(G,b);e.postCountMetric(G+q.page+":"+q.placement+":"+w);x(m).html(a);f(h,q,a)},error:function(c){e.postCountMetric(E+q.page+":"+q.placement+":"+w);(0===c.http.status||500<=c.http.status&&599>=c.http.status)&&0<a?b(d,a):(e.postCountMetric(E,1),r(h,q,c))}})}catch(c){l.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",c)}}return{get:function(d,e,a,h,k){b({A:d,block:e,request:a,handleFailure:k,handleSuccess:h},C)}}})})});